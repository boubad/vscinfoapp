<template>
  <require from='../connect-bar'></require>
  <connect-bar info.bind="userInfo"></connect-bar>
  <div class="container" if.bind="isConnected">
    <h2>${title}</h2>
    <h3 show.bind="hasErrorMessage" class="text-danger">${errorMessage}</h3>
    <h3 show.bind="hasInfoMessage" class="text-success">${infoMessage}</h3>
    <form role="form">
      <div class="row">
        <div class="col-sm-1">
          <div class="form-group">
            <label class="form-label" for="departements">Dép.</label>
            <select id="departements" value.bind="departement">
              <option>[Dep?]</option>
              <option repeat.for="depelem of departements" model.bind="depelem">${depelem.text}</option>
            </select>
          </div>
        </div>
        <div class="col-sm-1">
          <div class="form-group">
            <label class="form-label" for="annees">Année</label>
            <select id="annees" value.bind="annee">
              <option>[Année?]</option>
              <option repeat.for="anelem of annees" model.bind="anelem">${anelem.text}</option>
            </select>
          </div>
        </div>
        <div class="col-sm-1">
          <div class="form-group">
            <label class="form-label" for="semestres">Sem.</label>
            <select id="semestres" value.bind="semestre">
              <option>[Sem?]</option>
              <option repeat.for="semelem of semestres" model.bind="semelem">${semelem.text}</option>
            </select>
          </div>
        </div>
      </div>
    </form>
    <table if.bind="hasPages">
      <tbody>
        <tr>
          <td class="text-success">
            <strong>${pageStatus}</strong>
          </td>
        </tr>
        <tr>
          <td>
            <ul class="pagination">
              <li>
                <a href="#" click.delegate="firstPage()" show.bind="canPrevPage">Début</a>
              </li>
              <li>
                <a href="#" click.delegate="prevPage()" show.bind="canPrevPage">Préc.</a>
              </li>
              <li>
                <a href="#" click.delegate="nextPage()" show.bind="canNextPage">Suivant</a>
              </li>
              <li>
                <a href="#" click.delegate="lastPage()" show.bind="canNextPage">Fin</a>
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <table id="link-table">
      <tr>
        <th></th>
        <th>Nom</th>
        <th>Prénom(s)</th>
        <th>Date</th>
        <th>Genre</th>
        <th>Groupe</th>
        <th>Matiere</th>
        <th>Devoir</th>
        <th>Observations</th>
      </tr>
      <tr repeat.for="evt of items">
        <td>
          <div if.bind="evt.has_url">
            <img src.bind="evt.url" height="48"></img>
          </div>
        </td>
        <td>
          <a href="#etud/${evt.personid}/detail">${evt.lastname}</a>
        </td>
        <td>
          ${evt.firstname}
        </td>
        <td>
          ${evt.dateString}
        </td>
        <td>
          ${evt.genre}
        </td>
        <td>
          ${evt.groupeSigle}
        </td>
        <td>
          ${evt.matiereSigle}
        </td>
        <td>
          <a href="#grpevt/${evt.groupeeventid}/detail">${evt.groupeEventName}</a>
        </td>
        <td>
          ${evt.description}
        </td>
      </tr>
    </table>
  </div>
</template>
