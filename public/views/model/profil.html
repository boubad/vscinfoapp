<template>
  <require from='./connect-bar'></require>
  <connect-bar info.bind="userInfo"></connect-bar>
  <div if.bind="isConnected">
    <ul class="pagination">
      <li>
        <a href="#" click.delegate="set_profil()">Profil</a>
      </li>
      <li>
        <a href="#" click.delegate="set_password()">Mot de passe</a>
      </li>
      <li>
        <a href="#" click.delegate="set_avatar()">Avatar</a>
      </li>
    </ul>
    <h3 show.bind="hasErrorMessage" class="text-danger">${errorMessage}</h3>
    <h3 show.bind="hasInfoMessage" class="text-success">${infoMessage}</h3>
    <div if.bind="profilMode">
      <h2>Profil utilisateur</h2>
      <div class="row">
        <div class="col-sm-1">&nbsp;</div>
        <div class="col-sm-4">
          <form role="form">
            <div class="form-group">
              <label class="form-label" for="lastname">Nom de famille</label>
              <input type="text" class="form-control" id="lastname" value.bind="lastname" />
            </div>
            <div class="form-group">
              <label class="form-label" for="firstname">Prénom(s)</label>
              <input type="text" class="form-control" id="firstname" value.bind="firstname" />
            </div>
            <div class="form-group">
              <label class="form-label" for="email">Courriel</label>
              <input type="email" class="form-control" id="email" value.bind="email" />
            </div>
            <div class="form-group">
              <label class="form-label" for="phone">Téléphone</label>
              <input type="text" class="form-control" id="phone" value.bind="phone" />
            </div>
            <div class="form-group">
              <label class="form-label" for="description">Remarques</label>
              <textarea class="form-control" id="description" value.bind="description"></textarea>
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-primary" show.bind="canSaveData" click.delegate="saveData()">Modifier</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div if.bind="avatarMode">
      <div class="row">
        <div class="col-sm-1">&nbsp;</div>
        <div class="col-sm-4">
          <h2>Avatar</h2>
          <div if.bind="hasOldUrl">
            <img src.bind="oldUrl" height="128"></img>
            <button type="button" show.bind="canRemove" class="btn btn-primary" click.delegate="remove()">Supprimer</button>
          </div>
          <form role="form">
            <div class="form-group">
              <input type="file" id="fileToUpload" accept="image/png, image/jpeg" change.delegate="fileChanged($event)"></input>
            </div>
          </form>
          <div if.bind="hasUrl">
            <img src.bind="url" height="128"></img>
            <button type="button" show.bind="canSave" class="btn btn-primary" click.delegate="save()">Enregistrer</button>
          </div>
        </div>
      </div>
    </div>
    <div if.bind="passwordMode">
      <div class="row">
        <div class="col-sm-1">&nbsp;</div>
        <div class="col-sm-4">
          <h2>Mot de passe</h2>
          <form role="form">
            <div class="form-group">
              <label class="form-label" for="newpwd">Nouveau mot de passe</label>
              <input type="password" class="form-control" id="newpwd" value.bind="newPassword" placeholder="Nouveau mot de passe" />
            </div>
            <div class="form-group">
              <label class="form-label" for="confirmpwd">Confirmation nouveau mot de passe</label>
              <input type="password" class="form-control" id="confirmpwd" value.bind="confirmPassword" placeholder="Confirmation mot de passe" />
            </div>
            <div class="btn-group">
              <button type="button" class="btn btn-primary" show.bind="canChangePwd" click.delegate="changePwd">Changer mot de passe</button>
            </div>
          </form>
        </div>
        </row>
      </div>
    </div>
  </div>
</template>
