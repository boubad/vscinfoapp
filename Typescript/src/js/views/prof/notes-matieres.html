<template>
  <div class="container" if.bind="isConnected">
    <connect-bar info.bind="userInfo"></connect-bar>
    <table>
      <tr>
        <td style="text-align:center">
          <h2>${title}</h2>
        </td>
      </tr>
      <tr>
        <td style="text-align:center">
          <h3 show.bind="hasErrorMessage" class="text-danger">${errorMessage}</h3>
          <h3 show.bind="hasInfoMessage" class="text-success">${infoMessage}</h3>
        </td>
      </tr>
      <tr>
        <td>
          <table>
            <tr>
              <td>
                <div class="form-group">
                  <label class="form-label" for="departements">Dép.</label>
                  <select id="departements" value.bind="departement">
                    <option>[Dep?]</option>
                    <option repeat.for="depelem of departements" model.bind="depelem">${depelem.text}</option>
                  </select>
                </div>
              </td>
              <td>
                <div class="form-group">
                  <label class="form-label" for="annees">Année</label>
                  <select id="annees" value.bind="annee">
                    <option>[An?]</option>
                    <option repeat.for="anelem of annees" model.bind="anelem">${anelem.text}</option>
                  </select>
                </div>
              </td>
              <td>
                <div class="form-group">
                  <label class="form-label" for="semestres">Sem.</label>
                  <select id="semestres" value.bind="semestre">
                    <option>[Sem?]</option>
                    <option repeat.for="semelem of semestres" model.bind="semelem">${semelem.text}</option>
                  </select>
                </div>
              </td>
              <td>
                <div class="form-group">
                  <label class="form-label" for="unites">Unité</label>
                  <select id="unites" value.bind="unite">
                     <option>[Unite?]</option>
                    <option repeat.for="unelem of unites" model.bind="unelem">${unelem.text}</option>
                  </select>
                </div>
              </td>
              <td>
                <div class="form-group">
                  <label class="form-label" for="matieres">Matière</label>
                  <select id="matieres" value.bind="matiere">
                     <option>[Matiere?]</option>
                    <option repeat.for="matelem of matieres" model.bind="matelem">${matelem.text}</option>
                  </select>
                </div>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    <table if.bind="hasPages">
      <tbody>
        <tr>
          <td class="text-success">
            <strong>${pageStatus}</strong>
          </td>
        </tr>
        <tr>
          <td>
            <ul class="pagination">
              <li>
                <a href="#" click.delegate="firstPage()" show.bind="canPrevPage">Début</a>
              </li>
              <li>
                <a href="#" click.delegate="prevPage()" show.bind="canPrevPage">Préc.</a>
              </li>
              <li>
                <a href="#" click.delegate="nextPage()" show.bind="canNextPage">Suivant</a>
              </li>
              <li>
                <a href="#" click.delegate="lastPage()" show.bind="canNextPage">Fin</a>
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <table id="link-table">
      <tr>
        <th></th>
        <th>Nom de famille</th>
        <th>Prénom(s)</th>
        <th>Groupe</th>
        <th>Note</th>
      </tr>
      <tr repeat.for="note of items">
        <td>
          <div if.bind="note.has_url">
            <img src.bind="note.url" height="48"></img>
          </div>
        </td>
        <td>
          <a href="#etud/${note.personid}/detail">${note.lastname}</a>
        </td>
        <td>
          ${note.firstname}
        </td>
        <td>
          ${note.groupeSigle}
        </td>
        <td>
          ${note.note}
        </td>
      </tr>
    </table>
  </div>
</template>
